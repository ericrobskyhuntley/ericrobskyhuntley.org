{% extends "blog/base.html" %}
{% block content %}

{% if first %}
<div class="row lead-article">
  <div class = "jumbotron post-banner" style = "background-image:url({{first.banner_reduced.url}})">
    <div class="container">
      <div class = "col-md-10 offset-md-1 col-sm-10 offset-sm-1 post-banner-text">
        <h4>{{ first.date }}</h4>
        <hr>
        <h1 class="display-4"><a href="{% url 'blog:post_detail' first.slug %}">{{ first.title }}</a></h1>
        <hr>
        <ul class="list-inline">
        {% for author in first.authors.all %}
          <li class="list-inline-item">
            {% if author.page %}
              <a href="{% url 'blog:author_detail' author.slug %}">{{ author.full_name }}</a>
            {% else %}
              {{ author.full_name }}
            {% endif %}
          </li>
        {% endfor %}
        </ul>
        <p>{{ first.pandoc_process|safe|truncatewords:50 }}</p>
      </div>
    </div>
  </div>
</div>
{% endif %}
<div class="row">
    <div class="col-md-7 offset-md-1 col-sm-10 offset-sm-1">
    {% if latest_post_list %}
        {% include page_template %}
    {% else %}
        <p>No posts to display.</p>
    {% endif %}
    </div>
    <div class="sticky-top col-md-3 d-none d-md-block">
    <div id="events-col" class="sticky-top">
        <h2>Upcoming Events</h2>
        <ul class="list-unstyled">
        {% if events %}
            {% for event in events%}
            <li><h5>{{ event.title }}</h5></li>
            <li>{% for p in event.venue.all %} <a href="{{p.website}}">{{ p.dpt }}</a>{%if not forloop.last%}, {% endif %}{% endfor %}</li>
            <li>{{ event.day }}</li>
            <li><code>{{ event.start|time:"H:i" }}â€“{{ event.end|time:"H:i" }}</code></li>
            <hr>
            {% endfor %}
        {% else %}
        <li>No upcoming events.</li>
        {% endif %}
        </ul>
    </div>
    </div>
</div>
{% block js %}
    <script src="{{ STATIC_URL }}/static/el-pagination/js/el-pagination.js"></script>
    <script>$.endlessPaginate({
            paginateOnScroll: true,
            paginateOnScrollMargin: 2500
        });</script>
{% endblock %}

{% endblock%}